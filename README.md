# DynamoDB Client-Side Encryption Demo

## Prerequisites
- Terraform 1.4 or newer.
- Python 3.9+ with `pip`.
- AWS credentials that can create IAM, DynamoDB, and KMS resources.

## Run the Demo
```bash
# 1. Provision infrastructure (creates KMS keys, DynamoDB table, demo IAM users, and ../.env)
cd terraform
terraform init
terraform apply

# 2. Activate an AWS identity with KMS access (use the FULL_USER_NAME from the Terraform outputs/.env)
aws sts get-caller-identity

# 3. Set up Python environment in the repo root
cd ..
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# 4. Load environment variables generated by Terraform and run the script
set -a
source .env
set +a
python demo.py
```

## Clean Up
```bash
cd terraform
terraform destroy
```
